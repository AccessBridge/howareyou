"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[407],{35213:function(ve,O,t){t.r(O);var Z=t(78095),j=t.n(Z),w=t(34827),h=t.n(w),G=t(53939),a=t.n(G),H=t(83134),c=t.n(H),V=t(2329),$=t(39611),z=t(69294),F=t(45058),D=t(49990),Q=t(28941),x=t(40672),k=t(36704),Y=t(56511),J=t(33404),g=t(72223),N=t(41003),X=t(64401),o=t(82702),q=t(98197),ee=t(52417),ne=t(24552),A=t.n(ne),te=t(27809),e=t(97616),se=function(){var C=c()(a()().mark(function i(v){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(m){setTimeout(function(){m({data:{list:[{id:1,elderlyCode:"WL-8829",aacCode:"AAC-123162",address:"123 Main St",postalCode:"123456",lastVisitedDate:"7 days ago"},{id:2,elderlyCode:"WL-8830",aacCode:"AAC-123163",address:"456 Elm St",postalCode:"654321",lastVisitedDate:"10 days ago"}]},success:!0})},500)}));case 1:case"end":return s.stop()}},i)}));return function(v){return C.apply(this,arguments)}}(),re=function(){var C=c()(a()().mark(function i(v){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(m){setTimeout(function(){Q.ZP.success("Residents deleted successfully!"),m()},500)}));case 1:case"end":return s.stop()}},i)}));return function(v){return C.apply(this,arguments)}}(),_e=function(){var i=(0,o.useRef)(),v=(0,o.useState)(),P=h()(v,2),s=P[0],m=P[1],ae=(0,o.useState)([]),T=h()(ae,2),p=T[0],I=T[1],le=(0,o.useState)(!1),U=h()(le,2),ie=U[0],L=U[1],oe=(0,o.useState)(null),b=h()(oe,2),l=b[0],W=b[1],E=(0,o.useRef)(null),M=(0,D.useAccess)(),B=x.Z.Text,K=[{title:"Elderly Code",dataIndex:"elderlyCode",tip:"Unique identifier for the resident",formItemProps:{rules:[{required:!0,message:"Elderly Code is required"}]}},{title:"AAC Code",dataIndex:"aacCode",valueType:"text",responsive:["sm"]},{title:"Address",dataIndex:"address",valueType:"text",ellipsis:!0,responsive:["md"]},{title:"Postal Code",dataIndex:"postalCode",valueType:"text",responsive:["lg"]},{title:"Last Visited Date",dataIndex:"lastVisitedDate",valueType:"text",responsive:["xl"]},{title:"Actions",dataIndex:"option",valueType:"option",render:function(r,n){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){W(n),L(!0)},children:"View QR"}),(0,e.jsx)(k.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){D.history.push("/residents/".concat(n.id))},children:"View Details"})]})}}],de=function(){L(!1),W(null)},ue=function(){E.current&&A()(E.current).then(function(r){var n=document.createElement("a");n.href=r.toDataURL("image/png"),n.download="".concat(l==null?void 0:l.elderlyCode,"-qr-code.png"),n.click()})},ce=function(){E.current&&A()(E.current).then(function(r){var n=window.open("","_blank");n==null||n.document.write('<img src="'+r.toDataURL("image/png")+'" style="width: 100%;"/>'),n==null||n.document.close(),n==null||n.print()})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(D.Access,{accessible:M.isPublic,children:(0,e.jsx)(Y.Z,{justify:"center",style:{marginTop:"24px"},children:(0,e.jsxs)(J.Z,{xs:22,sm:20,md:16,lg:12,children:[(0,e.jsx)(B,{strong:!0,style:{fontSize:"16px"},children:"Thank you for being a kind neighbour! \u{1F3E1}"}),(0,e.jsx)("br",{}),(0,e.jsx)(B,{type:"secondary",children:"In the near future, you will be able to see all your past visits here!"})]})})}),(0,e.jsx)(D.Access,{accessible:M.isVolunteer||M.isStaff,children:(0,e.jsxs)(V._z,{style:{padding:"8px"},header:{title:"Elderly residents staying near you"},children:[(0,e.jsx)($.Z,{headerTitle:"Residents List",actionRef:i,rowKey:"id",search:{labelWidth:120},request:function(){var _=c()(a()().mark(function r(n,f,d){var R,y,S;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,se(j()(j()({},n),{},{sorter:f,filter:d}));case 2:return R=u.sent,y=R.data,S=R.success,u.abrupt("return",{data:(y==null?void 0:y.list)||[],success:S});case 6:case"end":return u.stop()}},r)}));return function(r,n,f){return _.apply(this,arguments)}}(),columns:K,rowSelection:{onChange:function(r,n){return I(n)}}}),(p==null?void 0:p.length)>0&&(0,e.jsx)(z.S,{extra:(0,e.jsxs)("div",{children:["Selected"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:p.length})," ","items\xA0\xA0"]}),children:(0,e.jsx)(g.ZP,{onClick:c()(a()().mark(function _(){var r,n;return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,re(p);case 2:I([]),(r=i.current)===null||r===void 0||(n=r.reloadAndRest)===null||n===void 0||n.call(r);case 4:case"end":return d.stop()}},_)})),children:"Batch Delete"})}),(0,e.jsx)(N.Z,{width:600,open:!!s,onClose:function(){m(void 0)},closable:!1,children:(s==null?void 0:s.elderlyCode)&&(0,e.jsx)(F.vY,{column:2,title:s==null?void 0:s.elderlyCode,request:c()(a()().mark(function _(){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{data:s||{}});case 1:case"end":return n.stop()}},_)})),params:{id:s==null?void 0:s.elderlyCode},columns:K})}),(0,e.jsxs)(X.Z,{title:"QR Code",open:ie,onCancel:de,footer:[(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(q.Z,{}),onClick:ce,children:"Print"},"print"),(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(ee.Z,{}),onClick:ue,children:"Save as Image"},"save")],children:[(0,e.jsx)("div",{ref:E,style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px"},children:(0,e.jsx)(te.Z,{value:"".concat(window.location.origin,"/register-visit/").concat(l==null?void 0:l.id),size:180,errorLevel:"H"})}),(0,e.jsxs)(x.Z.Paragraph,{style:{textAlign:"center"},children:["Elderly Code: ",l==null?void 0:l.elderlyCode]})]})]})})]})};O.default=_e}}]);
