"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[407],{52239:function(Fe,V,n){n.r(V),n.d(V,{default:function(){return he}});var J=n(54958),$=n.n(J),K=n(69375),j=n.n(K),W=n(82639),s=n.n(W),Y=n(97384),v=n.n(Y),H=n(85519),D=n(80533),Q=n(22686),X=n(46910),g=n(55787),w=n(19404),k=n(49273),q=n(85706),_=n(56749),ee=n(71626),A=n(78535),ne=n(75466),y=n(33273),M=n(51692),e=n(941),te=function(r){var o=r.modalVisible,h=r.onCancel;return(0,e.jsx)(M.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,open:o,onCancel:function(){return h()},footer:null,children:r.children})},re=te,S=n(99219),ae=n(85945),se=n(81242),T=n(7030),ue=n(83709),le=n(5681),ie=function(r){return(0,e.jsxs)(S.L0,{stepsProps:{size:"small"},stepsFormRender:function(h,t){return(0,e.jsx)(M.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:r.updateModalVisible,footer:t,onCancel:function(){return r.onCancel()},children:h})},onFinish:r.onSubmit,children:[(0,e.jsxs)(S.L0.StepForm,{initialValues:{name:r.values.name},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,e.jsx)(ae.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,e.jsx)(se.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,e.jsxs)(S.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,e.jsx)(T.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(T.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(ue.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(S.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,e.jsx)(le.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,e.jsx)(T.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},oe=ie,de=function(){var m=v()(s()().mark(function r(o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(f){setTimeout(function(){f({data:{list:[{id:1,name:"John Doe",address:"123 Main St",gender:0,phoneNumber:"123-456-7890"},{id:2,name:"Jane Smith",address:"456 Elm St",gender:1,phoneNumber:"987-654-3210"}]},success:!0})},500)}));case 1:case"end":return t.stop()}},r)}));return function(o){return m.apply(this,arguments)}}(),ce=function(){var m=v()(s()().mark(function r(o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(f){setTimeout(function(){w.ZP.success("Resident added successfully!"),f(!0)},500)}));case 1:case"end":return t.stop()}},r)}));return function(o){return m.apply(this,arguments)}}(),me=function(){var m=v()(s()().mark(function r(o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(f){setTimeout(function(){w.ZP.success("Resident updated successfully!"),f(!0)},500)}));case 1:case"end":return t.stop()}},r)}));return function(o){return m.apply(this,arguments)}}(),fe=function(){var m=v()(s()().mark(function r(o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(f){setTimeout(function(){w.ZP.success("Residents deleted successfully!"),f()},500)}));case 1:case"end":return t.stop()}},r)}));return function(o){return m.apply(this,arguments)}}(),ve=function(){var r=(0,y.useState)(!1),o=j()(r,2),h=o[0],t=o[1],f=(0,y.useState)(!1),L=j()(f,2),pe=L[0],b=L[1],ye=(0,y.useState)({}),I=j()(ye,2),Z=I[0],E=I[1],x=(0,y.useRef)(),xe=(0,y.useState)(),N=j()(xe,2),d=N[0],Ce=N[1],je=(0,y.useState)([]),U=j()(je,2),F=U[0],G=U[1],B=(0,g.useAccess)(),z=k.Z.Text,P=[{title:"Name",dataIndex:"name",tip:"Name is a unique key",formItemProps:{rules:[{required:!0,message:"Name is required"}]}},{title:"Address",dataIndex:"address",valueType:"text"},{title:"Gender",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"Male",status:"MALE"},1:{text:"Female",status:"FEMALE"}}},{title:"Phone Number",dataIndex:"phoneNumber",valueType:"text"},{title:"Actions",dataIndex:"option",valueType:"option",render:function(u,a){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){b(!0),E(a)},children:"Edit"}),(0,e.jsx)(q.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){g.history.push("/residents/".concat(a.id))},children:"View Details"})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.Access,{accessible:B.isPublic,children:(0,e.jsx)(_.Z,{justify:"center",style:{marginTop:"24px"},children:(0,e.jsxs)(ee.Z,{xs:22,sm:20,md:16,lg:12,children:[(0,e.jsx)(z,{strong:!0,style:{fontSize:"16px"},children:"Thank you for being a kind neighbour! \u{1F3E1}"}),(0,e.jsx)("br",{}),(0,e.jsx)(z,{type:"secondary",children:"In the near future, you will be able to see all your past visits here!"})]})})}),(0,e.jsx)(g.Access,{accessible:B.isVolunteer||B.isStaff,children:(0,e.jsxs)(H._z,{style:{padding:"8px"},header:{title:"Elderly residents staying near you"},children:[(0,e.jsx)(D.Z,{headerTitle:"Residents List",actionRef:x,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsx)(A.ZP,{type:"primary",onClick:function(){return t(!0)},children:"Add Resident"},"1")]},request:function(){var l=v()(s()().mark(function u(a,c,p){var i,R,O;return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,de($()($()({},a),{},{sorter:c,filter:p}));case 2:return i=C.sent,R=i.data,O=i.success,C.abrupt("return",{data:(R==null?void 0:R.list)||[],success:O});case 6:case"end":return C.stop()}},u)}));return function(u,a,c){return l.apply(this,arguments)}}(),columns:P,rowSelection:{onChange:function(u,a){return G(a)}}}),(F==null?void 0:F.length)>0&&(0,e.jsxs)(Q.S,{extra:(0,e.jsxs)("div",{children:["Selected"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:F.length})," ","items\xA0\xA0"]}),children:[(0,e.jsx)(A.ZP,{onClick:v()(s()().mark(function l(){var u,a;return s()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,fe(F);case 2:G([]),(u=x.current)===null||u===void 0||(a=u.reloadAndRest)===null||a===void 0||a.call(u);case 4:case"end":return p.stop()}},l)})),children:"Batch Delete"}),(0,e.jsx)(A.ZP,{type:"primary",children:"Batch Approve"})]}),(0,e.jsx)(re,{onCancel:function(){return t(!1)},modalVisible:h,children:(0,e.jsx)(D.Z,{onSubmit:function(){var l=v()(s()().mark(function u(a){var c;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ce(a);case 2:c=i.sent,c&&(t(!1),x.current&&x.current.reload());case 4:case"end":return i.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:P})}),Z&&Object.keys(Z).length?(0,e.jsx)(oe,{onSubmit:function(){var l=v()(s()().mark(function u(a){var c;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,me(a);case 2:c=i.sent,c&&(b(!1),E({}),x.current&&x.current.reload());case 4:case"end":return i.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),onCancel:function(){b(!1),E({})},updateModalVisible:pe,values:Z}):null,(0,e.jsx)(ne.Z,{width:600,open:!!d,onClose:function(){Ce(void 0)},closable:!1,children:(d==null?void 0:d.name)&&(0,e.jsx)(X.vY,{column:2,title:d==null?void 0:d.name,request:v()(s()().mark(function l(){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{data:d||{}});case 1:case"end":return a.stop()}},l)})),params:{id:d==null?void 0:d.name},columns:P})})]})})]})},he=ve}}]);
