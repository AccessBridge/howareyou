"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[354],{89754:function(Oe,p,n){n.r(p);var b=n(53939),M=n.n(b),z=n(83134),G=n.n(z),H=n(34827),j=n.n(H),N=n(50188),V=n.n(N),F=n(2329),P=n(49990),g=n(40672),y=n(28941),Y=n(83035),Q=n(57285),D=n(55454),o=n(56511),a=n(33404),$=n(72447),O=n(73042),v=n(72223),J=n(36704),X=n(30311),C=n(68620),R=n(66952),w=n(64401),k=n(27809),c=n(82702),q=n(41227),T=n(30989),ee=n(6568),ne=n(66740),te=n(54317),se=n(22205),re=n(98197),ie=n(52417),ae=n(35571),l=n.n(ae),_e=n(85652),de=n.n(_e),le=n(24552),A=n.n(le),oe=n(43482),e=n(97616),U,ce=(0,oe.kc)(function(f){var E=f.prefixCls,h=f.css;return{gradientButton:h(U||(U=V()([`
    &.`,"-btn-primary:not([disabled]):not(.",`-btn-dangerous) {
      border-width: 0;
      color: white;
      > span {
        position: relative;
      }

      &::before {
        content: '';
        background: linear-gradient(135deg, #ff4d4f, #ff7875);
        position: absolute;
        inset: 0;
        opacity: 1;
        transition: all 0.3s;
        border-radius: inherit;
      }

      &:hover::before {
        opacity: 0.8;
      }
    }
  `])),E,E)}});l().extend(de());var I="D MMM YYYY, hA",Z=g.Z.Title,s=g.Z.Text,B=g.Z.Paragraph,me=function(){var E=(0,c.useState)(!1),h=j()(E,2),ue=h[0],L=h[1],ve=(0,c.useState)(),K=j()(ve,2),t=K[0],Ee=K[1],he=(0,c.useState)(!1),W=j()(he,2),xe=W[0],S=W[1],m=(0,c.useRef)(null),u=(0,P.useParams)(),je=ce(),Pe=je.styles;(0,c.useEffect)(function(){var d=function(){var r=G()(M()().mark(function i(){var x;return M()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return L(!0),_.prev=1,_.next=4,(0,P.request)("/api/resident/".concat(u.id),{method:"GET"});case 4:x=_.sent,x.status==="ok"?Ee(x.data):y.ZP.error(x.message||"Failed to get data"),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(1),y.ZP.error("An error occurred when fetching resident data.");case 11:return _.prev=11,L(!1),_.finish(11);case 14:case"end":return _.stop()}},i,null,[[1,8,11,14]])}));return function(){return r.apply(this,arguments)}}();u.id&&d()},[u.id]);var ge="".concat(window.location.origin,"/submit/").concat(u.id),De=function(){S(!0)},fe=function(){S(!1)},pe=function(){m.current&&A()(m.current).then(function(r){var i=document.createElement("a");i.href=r.toDataURL("image/png"),i.download="qr-code.png",i.click()})},Me=function(){m.current&&A()(m.current).then(function(r){var i=window.open("","_blank");i==null||i.document.write('<img src="'+r.toDataURL("image/png")+'" style="width: 100%;"/>'),i==null||i.document.close(),i==null||i.print()})},ye=function(){P.history.push("/submit/".concat(u.id))};return(0,e.jsx)(F._z,{style:{padding:"8px"},children:ue?(0,e.jsx)(Y.Z,{active:!0,title:!0,paragraph:{rows:4},avatar:!0}):(0,e.jsxs)(Q.ZP,{button:{className:Pe.gradientButton},children:[(0,e.jsxs)(D.Z,{style:{marginBottom:8},bodyStyle:{padding:"16px"},children:[(0,e.jsxs)(o.Z,{gutter:[8,8],align:"middle",children:[(0,e.jsx)(a.Z,{xs:8,sm:6,children:(0,e.jsx)($.C,{size:96,shape:"square",src:(t==null?void 0:t.attachments[0])||"https://via.placeholder.com/128",alt:"Elderly Profile Picture"})}),(0,e.jsx)(a.Z,{xs:16,sm:18,children:(0,e.jsxs)(O.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,e.jsx)(Z,{level:4,style:{margin:0},children:"Elderly Profile"}),(0,e.jsxs)(o.Z,{justify:"space-between",children:[(0,e.jsxs)(a.Z,{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Elderly Code:"})," ",t==null?void 0:t.elderlyCode]}),(0,e.jsx)(a.Z,{children:(0,e.jsx)(v.ZP,{type:"text",onClick:De,icon:(0,e.jsx)(q.Z,{style:{fontSize:"24px"}})})})]}),(0,e.jsx)(o.Z,{children:(0,e.jsxs)(a.Z,{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"AAC Code:"})," ",t==null?void 0:t.aacCode]})})]})})]}),(0,e.jsx)(J.Z,{style:{margin:"16px 0"}}),(0,e.jsxs)(o.Z,{gutter:[4,4],children:[(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Name:"})," ",(0,e.jsx)(s,{children:t==null?void 0:t.name})]}),(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Contact:"})," ",(0,e.jsxs)(s,{children:[t==null?void 0:t.contact," ",(0,e.jsx)(T.Z,{})]})]}),t==null?void 0:t.nok.map(function(d,r){return(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsxs)(s,{strong:!0,style:{fontSize:"14px"},children:["NOK (",d.relationship,"):"]})," ",(0,e.jsxs)(s,{children:[d.name,", ",d.contact," ",(0,e.jsx)(T.Z,{})]})]},r)}),(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Address:"})," ",(0,e.jsx)(s,{children:t==null?void 0:t.address})]}),(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Notes:"})," ",(0,e.jsx)(B,{ellipsis:{rows:2,expandable:!0,symbol:"more"},children:t==null?void 0:t.notes})]}),(0,e.jsxs)(a.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Attachments:"})," ",(0,e.jsx)(s,{children:(t==null?void 0:t.attachments.length)>0?"Available":"None"})]}),(0,e.jsx)(a.Z,{xs:24,sm:12,children:(0,e.jsxs)(X.Z,{justify:"space-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Last Visit:"}),t!=null&&t.visits&&t.visits.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("br",{}),(0,e.jsx)(s,{children:l()(t.visits[0].datetime).format(I)})," ",(0,e.jsx)("br",{}),"By ",t.visits[0].visitor.name," (",(0,e.jsx)(s,{type:"secondary",children:t.visits[0].visitor.role}),") ",(0,e.jsx)("br",{}),(0,e.jsxs)(s,{style:{color:"green"},children:[l()().diff(l()(t.visits[0].datetime),"days")," days ago"]})]}):(0,e.jsx)(s,{children:"No visits"})]}),(0,e.jsx)(v.ZP,{type:"primary",icon:(0,e.jsx)(ee.Z,{}),onClick:ye,style:{marginTop:"24px",paddingTop:"20px",paddingBottom:"20px"},children:"Submit Info"})]})})]})]}),(0,e.jsxs)(D.Z,{style:{marginTop:8},bodyStyle:{padding:"16px"},children:[(0,e.jsx)(Z,{level:4,style:{marginBottom:8},children:"Recent Visits"}),(0,e.jsx)(C.Z,{itemLayout:"vertical",dataSource:(t==null?void 0:t.visits)||[],renderItem:function(r){return(0,e.jsx)(C.Z.Item,{style:{padding:"8px"},children:(0,e.jsx)(D.Z,{bordered:!1,style:{backgroundColor:"#f9f9f9"},bodyStyle:{padding:"8px"},children:(0,e.jsxs)(o.Z,{gutter:[8,8],children:[(0,e.jsx)(a.Z,{xs:8,sm:6,children:r.attachments&&r.attachments.length>0?(0,e.jsx)(R.Z,{width:64,height:48,src:r.attachments[0],alt:"Visit image",style:{borderRadius:"4px"}}):(0,e.jsx)(R.Z,{width:64,height:48,src:"https://via.placeholder.com/64x48?text=No+Image",alt:"Placeholder",style:{borderRadius:"4px"}})}),(0,e.jsx)(a.Z,{xs:16,sm:18,children:(0,e.jsxs)(O.Z,{direction:"vertical",size:"small",children:[(0,e.jsx)(s,{style:{fontSize:"14px"},children:r.notes}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(ne.Z,{})," ",r.visitor.name,", ",(0,e.jsx)(s,{type:"secondary",children:r.visitor.role})]}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(te.Z,{})," ",l()(r.datetime).format(I)," (",l()().diff(l()(r.datetime),"days")," days ago)"]}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(se.Z,{})," ",r.location]})]})})]})})})}})]}),(0,e.jsxs)(w.Z,{title:"QR Code",open:xe,onCancel:fe,footer:[(0,e.jsx)(v.ZP,{icon:(0,e.jsx)(re.Z,{}),onClick:Me,children:"Print"},"print"),(0,e.jsx)(v.ZP,{type:"primary",icon:(0,e.jsx)(ie.Z,{}),onClick:pe,children:"Save as Image"},"save")],children:[(0,e.jsx)("div",{ref:m,style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px"},children:(0,e.jsx)(k.Z,{value:ge,size:180,errorLevel:"H"})}),(0,e.jsxs)(B,{style:{textAlign:"center"},children:["Elderly Code: ",t==null?void 0:t.elderlyCode]})]})]})})};p.default=me}}]);
