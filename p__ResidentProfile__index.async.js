"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[354],{30565:function(Oe,p,n){n.r(p);var K=n(82639),D=n.n(K),b=n(97384),S=n.n(b),z=n(69375),g=n.n(z),G=n(7952),F=n.n(G),H=n(16752),f=n(88876),N=n(79980),w=n(91077),V=n(81097),Y=n(14760),Q=n(84350),$=n(4998),J=n(85519),y=n(55787),x=n(49273),X=n(19404),k=n(98632),q=n(90554),j=n(90509),d=n(56749),o=n(71626),ee=n(21122),M=n(95457),h=n(78535),ne=n(85706),te=n(1617),O=n(8009),C=n(14530),se=n(51692),ae=n(27590),re=n(53640),_e=n(12925),i=n.n(_e),oe=n(84172),le=n.n(oe),ie=n(97980),B=n.n(ie),c=n(33273),e=n(941),R,de=(0,re.kc)(function(P){var u=P.prefixCls,v=P.css;return{gradientButton:v(R||(R=F()([`
    &.`,`-btn-primary:not([disabled]):not(
        .`,`-btn-dangerous
      ) {
      border-width: 0;
      color: white;
      > span {
        position: relative;
      }

      &::before {
        content: '';
        background: linear-gradient(135deg, #ff4d4f, #ff7875);
        position: absolute;
        inset: 0;
        opacity: 1;
        transition: all 0.3s;
        border-radius: inherit;
      }

      &:hover::before {
        opacity: 0.8;
      }
    }
  `])),u,u)}});i().extend(le());var T="D MMM YYYY, hA",A=x.Z.Title,s=x.Z.Text,U=x.Z.Paragraph,ce=function(){var u=(0,c.useState)(!1),v=g()(u,2),me=v[0],I=v[1],he=(0,c.useState)(),L=g()(he,2),t=L[0],ue=L[1],ve=(0,c.useState)(!1),Z=g()(ve,2),Ee=Z[0],W=Z[1],m=(0,c.useRef)(null),E=(0,y.useParams)(),ge=de(),xe=ge.styles;(0,c.useEffect)(function(){var l=function(){var a=S()(D()().mark(function r(){return D()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return I(!0),_.prev=1,_.t0=ue,_.next=5,new Promise(function(Me){setTimeout(function(){Me({id:1,elderlyCode:"WL-8829",aacCode:"AAC-123162",name:"Goh Seok Meng",address:"Woodlands Drive 62, #02-144, S623182",contact:81234567,nok:[{name:"David Goh",relationship:"Son",contact:91234567}],notes:"Goh Seok Meng lives alone on weekdays, can only speak Hokkien, and has difficulty walking. She does not mind having pictures taken.",languages:["Hokkien"],attachments:[],visits:[{datetime:"09-10-2024 20:00",visitor:{id:99,name:"David",role:"public"},location:"Home",attachments:[],notes:"All good."},{datetime:"09-08-2024 17:00",visitor:{id:2,name:"David Hiong",role:"volunteer"},location:"Woodlands Hawker Centre",attachments:[],notes:"Saw auntie at Woodlands Hawker Centre, she's doing well"}]})},1e3)});case 5:_.t1=_.sent,(0,_.t0)(_.t1),_.next=12;break;case 9:_.prev=9,_.t2=_.catch(1),X.ZP.error("An error occurred when fetching resident data.");case 12:return _.prev=12,I(!1),_.finish(12);case 15:case"end":return _.stop()}},r,null,[[1,9,12,15]])}));return function(){return a.apply(this,arguments)}}();E.id&&l()},[E.id]);var je="".concat(window.location.origin,"/register-visit/").concat(E.id),Pe=function(){W(!0)},pe=function(){W(!1)},De=function(){m.current&&B()(m.current).then(function(a){var r=document.createElement("a");r.href=a.toDataURL("image/png"),r.download="qr-code.png",r.click()})},fe=function(){m.current&&B()(m.current).then(function(a){var r=window.open("","_blank");r==null||r.document.write('<img src="'+a.toDataURL("image/png")+'" style="width: 100%;"/>'),r==null||r.document.close(),r==null||r.print()})},ye=function(){y.history.push("/register-visit/".concat(E.id))};return(0,e.jsx)(J._z,{style:{padding:"8px"},children:me?(0,e.jsx)(k.Z,{active:!0,title:!0,paragraph:{rows:4},avatar:!0}):(0,e.jsxs)(q.ZP,{button:{className:xe.gradientButton},children:[(0,e.jsxs)(j.Z,{style:{marginBottom:8},bodyStyle:{padding:"16px"},children:[(0,e.jsxs)(d.Z,{gutter:[8,8],align:"middle",children:[(0,e.jsx)(o.Z,{xs:8,sm:6,children:(0,e.jsx)(ee.C,{size:96,shape:"square",src:(t==null?void 0:t.attachments[0])||"https://via.placeholder.com/128",alt:"Elderly Profile Picture"})}),(0,e.jsx)(o.Z,{xs:16,sm:18,children:(0,e.jsxs)(M.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,e.jsx)(A,{level:4,style:{margin:0},children:"Elderly Profile"}),(0,e.jsxs)(d.Z,{justify:"space-between",children:[(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Elderly Code:"})," ",t==null?void 0:t.elderlyCode]}),(0,e.jsx)(o.Z,{children:(0,e.jsx)(h.ZP,{type:"text",onClick:Pe,icon:(0,e.jsx)(H.Z,{style:{fontSize:"24px"}})})})]}),(0,e.jsx)(d.Z,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"AAC Code:"})," ",t==null?void 0:t.aacCode]})})]})})]}),(0,e.jsx)(ne.Z,{style:{margin:"16px 0"}}),(0,e.jsxs)(d.Z,{gutter:[4,4],children:[(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Name:"})," ",(0,e.jsx)(s,{children:t==null?void 0:t.name})]}),(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Contact:"})," ",(0,e.jsxs)(s,{children:[t==null?void 0:t.contact," ",(0,e.jsx)(f.Z,{})]})]}),t==null?void 0:t.nok.map(function(l,a){return(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsxs)(s,{strong:!0,style:{fontSize:"14px"},children:["NOK (",l.relationship,"):"]})," ",(0,e.jsxs)(s,{children:[l.name,", ",l.contact," ",(0,e.jsx)(f.Z,{})]})]},a)}),(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Address:"})," ",(0,e.jsx)(s,{children:t==null?void 0:t.address})]}),(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Notes:"})," ",(0,e.jsx)(U,{ellipsis:{rows:2,expandable:!0,symbol:"more"},children:t==null?void 0:t.notes})]}),(0,e.jsxs)(o.Z,{xs:24,sm:12,children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Attachments:"})," ",(0,e.jsx)(s,{children:(t==null?void 0:t.attachments.length)>0?"Available":"None"})]}),(0,e.jsx)(o.Z,{xs:24,sm:12,children:(0,e.jsxs)(te.Z,{justify:"space-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(s,{strong:!0,style:{fontSize:"14px"},children:"Last Visit:"}),t!=null&&t.visits&&t.visits.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("br",{}),(0,e.jsx)(s,{children:i()(t.visits[0].datetime).format(T)})," ",(0,e.jsx)("br",{}),"By ",t.visits[0].visitor.name," (",(0,e.jsx)(s,{type:"secondary",children:t.visits[0].visitor.role}),") ",(0,e.jsx)("br",{}),(0,e.jsxs)(s,{style:{color:"green"},children:[i()().diff(i()(t.visits[0].datetime),"days")," ","days ago"]})]}):(0,e.jsx)(s,{children:"No visits"})]}),(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)(N.Z,{}),onClick:ye,style:{marginTop:"24px",paddingTop:"20px",paddingBottom:"20px"},children:"Submit Info"})]})})]})]}),(0,e.jsxs)(j.Z,{style:{marginTop:8},bodyStyle:{padding:"16px"},children:[(0,e.jsx)(A,{level:4,style:{marginBottom:8},children:"Recent Visits"}),(0,e.jsx)(O.Z,{itemLayout:"vertical",dataSource:(t==null?void 0:t.visits)||[],renderItem:function(a){return(0,e.jsx)(O.Z.Item,{style:{padding:"8px"},children:(0,e.jsx)(j.Z,{bordered:!1,style:{backgroundColor:"#f9f9f9"},bodyStyle:{padding:"8px"},children:(0,e.jsxs)(d.Z,{gutter:[8,8],children:[(0,e.jsx)(o.Z,{xs:8,sm:6,children:a.attachments&&a.attachments.length>0?(0,e.jsx)(C.Z,{width:64,height:48,src:a.attachments[0],alt:"Visit image",style:{borderRadius:"4px"}}):(0,e.jsx)(C.Z,{width:64,height:48,src:"https://via.placeholder.com/64x48?text=No+Image",alt:"Placeholder",style:{borderRadius:"4px"}})}),(0,e.jsx)(o.Z,{xs:16,sm:18,children:(0,e.jsxs)(M.Z,{direction:"vertical",size:"small",children:[(0,e.jsx)(s,{style:{fontSize:"14px"},children:a.notes}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(w.Z,{})," ",a.visitor.name,","," ",(0,e.jsx)(s,{type:"secondary",children:a.visitor.role})]}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(V.Z,{})," ",i()(a.datetime).format(T)," (",i()().diff(i()(a.datetime),"days")," days ago)"]}),(0,e.jsxs)(s,{style:{fontSize:"14px"},children:[(0,e.jsx)(Y.Z,{})," ",a.location]})]})})]})})})}})]}),(0,e.jsxs)(se.Z,{title:"QR Code",open:Ee,onCancel:pe,footer:[(0,e.jsx)(h.ZP,{icon:(0,e.jsx)(Q.Z,{}),onClick:fe,children:"Print"},"print"),(0,e.jsx)(h.ZP,{type:"primary",icon:(0,e.jsx)($.Z,{}),onClick:De,children:"Save as Image"},"save")],children:[(0,e.jsx)("div",{ref:m,style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px"},children:(0,e.jsx)(ae.Z,{value:je,size:180,errorLevel:"H"})}),(0,e.jsxs)(U,{style:{textAlign:"center"},children:["Elderly Code: ",t==null?void 0:t.elderlyCode]})]})]})})};p.default=ce}}]);
