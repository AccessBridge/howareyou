"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[739],{30989:function(E,Z,e){e.d(Z,{Z:function(){return g}});var O=e(8429),P=e(82702),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},m=S,j=e(12242),l=function(T,c){return P.createElement(j.Z,(0,O.Z)({},T,{ref:c,icon:m}))},b=P.forwardRef(l),g=b},39062:function(E,Z,e){e.r(Z),e.d(Z,{default:function(){return ee}});var O=e(78095),P=e.n(O),S=e(34827),m=e.n(S),j=e(53939),l=e.n(j),b=e(83134),g=e.n(b),k=e(30989),T=e(8429),c=e(82702),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},B=G,H=e(12242),U=function(i,t){return c.createElement(H.Z,(0,T.Z)({},i,{ref:t,icon:B}))},w=c.forwardRef(U),Y=w,D=e(40672),p=e(36948),h=e(28941),J=e(73042),x=e(5472),K=e(56511),z=e(33404),R=e(72223),Q=e(41654),F=e(49990),n=e(97616),W=D.Z.Title,X=function(){var y=g()(l()().mark(function i(t){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{status:"ok",message:"OTP sent successfully!"});case 1:case"end":return r.stop()}},i)}));return function(t){return y.apply(this,arguments)}}(),q=function(){var y=g()(l()().mark(function i(t){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise(function(I){return setTimeout(I,1e3)});case 2:if(t!=="0000"){r.next=4;break}return r.abrupt("return",{status:"ok",data:{id:2,role:"public",name:"resname",token:"mock-token-resident"}});case 4:if(t!=="0001"){r.next=6;break}return r.abrupt("return",{status:"ok",data:{id:1,role:"volunteer",name:"volname",token:"mock-token-volunteer"}});case 6:if(t!=="0002"){r.next=8;break}return r.abrupt("return",{status:"ok",data:{id:1,role:"staff",name:"staffname",token:"mock-token-staff"}});case 8:return r.abrupt("return",{status:"error",message:"Invalid OTP"});case 9:case"end":return r.stop()}},i)}));return function(t){return y.apply(this,arguments)}}(),_=function(){var i=(0,c.useState)(!1),t=m()(i,2),C=t[0],r=t[1],I=(0,c.useState)(0),V=m()(I,2),f=V[0],$=V[1],N=(0,F.useModel)("@@initialState"),re=N.initialState,ne=N.setInitialState,ae=p.Z.useForm(),te=m()(ae,1),A=te[0];(0,c.useEffect)(function(){var d;return f>0&&(d=setInterval(function(){$(function(o){return o<=1?(clearInterval(d),0):o-1})},1e3)),function(){d&&clearInterval(d)}},[f]);var se=function(){var d=g()(l()().mark(function o(){var v,s;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(v=A.getFieldValue("phoneNumber"),v){a.next=4;break}return h.ZP.error("Please enter your phone number!"),a.abrupt("return");case 4:return r(!0),a.prev=5,a.next=8,X(v);case 8:s=a.sent,s.status==="ok"?(h.ZP.success(s.message),$(30)):h.ZP.error(s.message||"Failed to send OTP!"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(5),h.ZP.error("Error occurred while sending OTP!");case 15:r(!1);case 16:case"end":return a.stop()}},o,null,[[5,12]])}));return function(){return d.apply(this,arguments)}}(),le=function(){var d=g()(l()().mark(function o(v){var s,L;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r(!0),u.prev=1,u.next=4,q(v.otp);case 4:s=u.sent,s.status==="ok"?((0,Q.flushSync)(function(){return ne(P()(P()({},re),s.data))}),L=new URLSearchParams(location.search).get("redirect")||"/",F.history.push(L),h.ZP.success("Login successful!")):h.ZP.error(s.message||"Invalid OTP!"),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(1),h.ZP.error("Error occurred during login!");case 11:r(!1);case 12:case"end":return u.stop()}},o,null,[[1,8]])}));return function(v){return d.apply(this,arguments)}}(),oe=(0,c.useState)(!1),M=m()(oe,2),ue=M[0],ie=M[1],de=function(o){var v=o.target.value,s=/^\d{8}$/.test(v);ie(s)};return(0,n.jsx)(J.Z,{style:{height:"100vh",display:"flex",justifyContent:"center",width:"100%"},children:(0,n.jsxs)("div",{style:{padding:24,backgroundColor:"#fff",borderRadius:8},children:[(0,n.jsx)(W,{level:2,style:{textAlign:"center",marginBottom:24},children:"HowAreYou Login"}),(0,n.jsxs)(p.Z,{form:A,name:"login",onFinish:le,style:{width:300},children:[(0,n.jsx)(p.Z.Item,{name:"phoneNumber",rules:[{required:!0,message:"Please enter your phone number!"},{pattern:/^\d{8}$/,message:"Please enter a valid 8-digit phone number!"}],children:(0,n.jsx)(x.Z,{size:"large",prefix:(0,n.jsx)(k.Z,{}),placeholder:"Phone Number",onChange:de})}),(0,n.jsx)(p.Z.Item,{label:"OTP",required:!0,style:{marginBottom:24},children:(0,n.jsxs)(K.Z,{gutter:8,children:[(0,n.jsx)(z.Z,{span:16,children:(0,n.jsx)(p.Z.Item,{name:"otp",noStyle:!0,rules:[{required:!0,message:"Please enter the OTP!"}],children:(0,n.jsx)(x.Z,{size:"large",prefix:(0,n.jsx)(Y,{}),placeholder:"Code"})})}),(0,n.jsx)(z.Z,{span:8,children:(0,n.jsx)(R.ZP,{size:"large",onClick:se,disabled:!ue||f>0,block:!0,style:{fontSize:f>0?"10px":void 0,padding:"0 8px",backgroundColor:f>0?"#bae7ff":"#1890ff",borderColor:f>0?"#bae7ff":"#1890ff",color:"#fff"},children:f>0?"Re-send (".concat(f,"s)"):"Get Code"})})]})}),(0,n.jsx)(p.Z.Item,{children:(0,n.jsx)(R.ZP,{loading:C,type:"primary",htmlType:"submit",size:"large",block:!0,style:{backgroundColor:"#1890ff",borderColor:"#1890ff",color:"#fff"},children:"Sign In"})})]})]})})},ee=_}}]);
